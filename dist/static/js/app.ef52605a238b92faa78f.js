webpackJsonp([1],{"+D9t":function(e,t){},"+cgv":function(e,t){},"3f40":function(e,t){},"4PXs":function(e,t){},"4qOc":function(e,t){},"8C0J":function(e,t){},EJb4:function(e,t){},L7A0:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(e){a("EJb4")},null,null).exports,i=a("/ocq"),r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"hello"})},staticRenderFns:[]};var l=a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",input:""}}},r,!1,function(e){a("oR2u")},"data-v-159d08f9",null).exports,c=a("//Fk"),d=a.n(c),u=a("mtWM"),m=a.n(u);m.a.defaults.baseURL="http://193.112.55.79:9095/api/private/v1/",m.a.interceptors.request.use(function(e){var t=localStorage.getItem("mytoken");return t&&(e.headers.Authorization=t),e},function(e){return d.a.reject(e)});var p=function(){return m.a.get("roles").then(function(e){return e.data})},f=function(e){return m.a.get("rights/"+e.type).then(function(e){return e.data})},g=function(e){return m.a.get("categories",{params:e}).then(function(e){return e.data})},h={data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{loginValide:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("数据输入不合法"),!1;var a;(a=t.form,m.a.post("login",a).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status?(t.$store.dispatch("setusernameAction",e.data.username),localStorage.setItem("mytoken",e.data.token),t.$router.push({name:"Home"})):400===e.meta.status&&t.$message.error(e.meta.msg)})})}}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"container"},[o("el-form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules}},[o("img",{staticClass:"avatar",attrs:{src:a("lS+k"),alt:""}}),e._v(" "),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"用户名","prefix-icon":"myicon myicon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"密码","prefix-icon":"myicon myicon-key"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){e.loginValide("loginForm")}}},[e._v("登陆")])],1)],1)],1)])},staticRenderFns:[]};var b=a("VU/8")(h,v,!1,function(e){a("+D9t")},"data-v-789f3a00",null).exports,_={data:function(){return{isCollapse:!1,uo:!0,menuList:[]}},methods:{logout:function(){localStorage.removeItem("mytoken"),this.$router.push({name:"Login"})},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},mounted:function(){var e=this;m.a.get("menus").then(function(e){return e.data}).then(function(t){e.menuList=t.data})}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-container",[a("el-aside",{attrs:{width:"auto"}},[a("div",{staticClass:"logo"}),e._v(" "),a("el-menu",{staticClass:"el-menu-admin",attrs:{router:!0,collapse:e.isCollapse,"unique-opened":e.uo,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menuList,function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v(e._s(t.authName))])]),e._v(" "),e._l(t.children,function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",[e._v(e._s(t.authName))])])})],2)}))],1),e._v(" "),a("el-container",[a("el-header",[a("span",{staticClass:"myicon myicon-menu toggle-btn",on:{click:function(t){e.isCollapse=!e.isCollapse}}}),e._v(" "),a("div",{staticClass:"system-title"},[e._v("电商后台管理系统")]),e._v(" "),a("div",[a("span",{staticClass:"welcome"},[e._v("你好："+e._s(e.$store.state.username?e.$store.state.username:e.$store.getters.username))]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出")])],1)]),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(_,y,!1,function(e){a("8C0J")},"data-v-75a9c6ad",null).exports,k={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"welcome"},[this._v("\n    欢迎使用后台管理系统\n")])},staticRenderFns:[]};var x=a("VU/8")({},k,!1,function(e){a("aa+H")},"data-v-526b6276",null).exports,C={data:function(){return{value2:"",searchValue:"",pagenum:1,pagesize:10,total:0,userList:[],rolesList:[],addDialogFormVisible:!1,addformLabelWidth:"100",editDialogFormVisible:!1,grantDialogFormVisible:!1,addform:{username:"",password:"",email:"",mobile:""},editform:{username:"",email:"",mobile:"",id:""},grantform:{username:"",id:"",rid:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],mobile:[{required:!0,message:"电话不能为空"}]}}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.initList()},searchUserList:function(){this.initList()},showAddDialog:function(){this.addDialogFormVisible=!0},addUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e?(a=t.addform,m.a.post("users",a).then(function(e){return e.data})).then(function(e){console.log(e),201===e.meta.status?(t.$message({type:"success",message:e.meta.msg}),t.initList(),t.addDialogFormVisible=!1):t.$message({type:"success",message:e.meta.msg})}):t.$message({type:"warning",message:"数据输入不合法"})})},showEditDialog:function(e){console.log(e),this.editform.username=e.username,this.editform.email=e.email,this.editform.mobile=e.mobile,this.editform.id=e.id,this.editDialogFormVisible=!0},editUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e?(a=t.editform,m.a.put("users/"+a.id,a).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status?(t.$message({type:"success",message:e.meta.msg}),t.initList(),t.editDialogFormVisible=!1):t.$message({type:"success",message:e.meta.msg})}):t.$message({type:"warning",message:"数据输入不合法"})})},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除id号为"+e+"的用户数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return m.a.delete("users/"+e).then(function(e){return e.data})})(e).then(function(e){200===e.meta.status?(t.$message({type:"success",message:e.meta.msg}),t.initList()):t.$message({type:"success",message:e.meta.msg})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},showGrantDialog:function(e){var t=this;this.grantDialogFormVisible=!0,this.grantform.id=e.id,this.grantform.username=e.username,p().then(function(e){console.log(e),t.rolesList=e.data})},grantUserSubmit:function(){var e,t=this;(console.log(this.grantform),this.grantform.rid)?(e=this.grantform,m.a.put("users/"+e.id+"/role",{rid:e.rid}).then(function(e){return e.data})).then(function(e){200===e.meta.status?(t.$message({type:"success",message:e.meta.msg}),t.grantDialogFormVisible=!1):t.$message({type:"success",message:e.meta.msg})}):this.$message({type:"warning",message:"请先选择角色，否则无法提交"})},changeUserState:function(e){var t,a=this;console.log(e),(t={uid:e.id,type:e.mg_state},m.a.put("users/"+t.uid+"/state/"+t.type).then(function(e){return e.data})).then(function(e){200===e.meta.status?(a.$message({type:"success",message:e.meta.msg}),a.initList()):a.$message({type:"success",message:e.meta.msg})})},initList:function(){var e,t=this;(e={params:{query:this.searchValue,pagenum:this.pagenum,pagesize:this.pagesize}},m.a.get("users",e).then(function(e){return e.data})).then(function(e){console.log(e),t.userList=e.data.users,t.total=e.data.total})}},mounted:function(){this.handleSizeChange(this.pagesize)}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户列表")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-input",{staticClass:"input-with-select search-input",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchUserList(t):null}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUserList},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:e.showAddDialog}},[e._v("添加用户")])],1),e._v(" "),[a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.userList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.changeUserState(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",title:"编辑"},on:{click:function(a){e.showEditDialog(t.row)}}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",plain:""},on:{click:function(a){e.deleteUser(t.row.id)}}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",plain:"",title:"授权角色"},on:{click:function(a){e.showGrantDialog(t.row)}}})]}}])})],1)],e._v(" "),a("el-pagination",{staticClass:"user-page",attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addform",attrs:{model:e.addform,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addform.username,callback:function(t){e.$set(e.addform,"username",t)},expression:"addform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.addform.password,callback:function(t){e.$set(e.addform,"password",t)},expression:"addform.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addform.email,callback:function(t){e.$set(e.addform,"email",t)},expression:"addform.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.addform.mobile,callback:function(t){e.$set(e.addform,"mobile",t)},expression:"addform.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUserSubmit("addform")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"editform",attrs:{model:e.editform,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editform.username,callback:function(t){e.$set(e.editform,"username",t)},expression:"editform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editform.email,callback:function(t){e.$set(e.editform,"email",t)},expression:"editform.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.editform.mobile,callback:function(t){e.$set(e.editform,"mobile",t)},expression:"editform.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editUserSubmit("editform")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.grantDialogFormVisible},on:{"update:visible":function(t){e.grantDialogFormVisible=t}}},[a("el-form",{ref:"grantform",attrs:{model:e.grantform,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名:"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{disabled:""},model:{value:e.grantform.username,callback:function(t){e.$set(e.grantform,"username",t)},expression:"grantform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.grantform.rid,callback:function(t){e.$set(e.grantform,"rid",t)},expression:"grantform.rid"}},e._l(e.rolesList,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.grantDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.grantUserSubmit}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var F=a("VU/8")(C,S,!1,function(e){a("4PXs")},"data-v-918e7fce",null).exports,$={data:function(){return{rightList:[]}},filters:{levelFormat:function(e){return"0"===e?"一级":"1"===e?"二级":"2"===e?"三级":void 0}},mounted:function(){var e=this;f({type:"list"}).then(function(t){console.log(t),200===t.meta.status&&(e.rightList=t.data)})}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限列表")])],1),e._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authName",label:"权限",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"path",label:"路径",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"层级",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("levelFormat")(t.row.level)))])]}}])})],1)]],2)},staticRenderFns:[]};var A=a("VU/8")($,V,!1,function(e){a("L7A0")},"data-v-353bc98e",null).exports,L=a("c/Tr"),z=a.n(L),D=a("lHA8"),E=a.n(D),R={data:function(){return{rolesList:[],rightsList:[],rolerdeightlist:[],currentRoleId:"",grantDialogFormVisible:!1,adddialogFormVisible:!1,defaultProps:{children:"children",label:"authName"},addform:{roleName:"",roleDesc:""}}},mounted:function(){this.initList()},methods:{deleteroleright:function(e,t){var a,o,n=this;(a=e.id,o=t,m.a.delete("roles/"+a+"/rights/"+o).then(function(e){return e.data})).then(function(t){200===t.meta.status?(console.log(t),n.$message({type:"success",message:t.meta.msg}),e.children=t.data):n.$message({type:"warning",message:t.meta.msg})})},showadddialog:function(){this.adddialogFormVisible=!0},addRoleSubmit:function(){var e,t=this;(e=this.addform,m.a.post("roles",e).then(function(e){return e.data})).then(function(e){201===e.meta.status?(t.$message({type:"success",message:"添加角色成功"}),t.initList(),t.adddialogFormVisible=!1):t.$message({type:"warning",message:"失败"})})},initList:function(){var e=this;p().then(function(t){console.log(t),e.rolesList=t.data})},grantrightsubmit:function(){var e,t,a=this,o=this.$refs.tree.getCheckedNodes().map(function(e){return e.id+","+e.pid}).join(","),n=new E.a(o.split(",")),s=z()(n);(e=this.currentRoleId,t={rids:s.join(",")},m.a.post("roles/"+e+"/rights",t).then(function(e){return e.data})).then(function(e){200===e.meta.status?(a.$message({type:"success",message:e.meta.msg}),a.grantDialogFormVisible=!1,a.initList()):a.$message({type:"success",message:e.meta.msg})})},showGrantDialog:function(e){var t=this;console.log(e),this.grantDialogFormVisible=!0,this.currentRoleId=e.id,f({type:"tree"}).then(function(e){t.rightsList=e.data}),this.rolerdeightlist.length=0,e.children.forEach(function(e,a){e.children&&0!==e.children.length&&e.children.forEach(function(e){e.children&&0!==e.children.length&&e.children.forEach(function(e){t.rolerdeightlist.push(e.id)})})})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色列表")])],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:e.showadddialog}},[e._v("添加角色")]),e._v(" "),[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.rolesList}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.children,function(o){return a("el-row",{key:o.id,staticStyle:{"margin-bottom":"15px"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:"success"},on:{close:function(a){e.deleteroleright(t.row,o.id)}}},[e._v("\n                    "+e._s(o.authName)+"\n                    ")]),e._v(" "),0!==o.children.length?a("span",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(o.children,function(o){return a("el-row",{key:o.id,staticStyle:{"margin-bottom":"8px"}},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:"warning"},on:{close:function(a){e.deleteroleright(t.row,o.id)}}},[e._v("\n                            "+e._s(o.authName)+"\n                            ")]),e._v(" "),0!==o.children.length?a("span",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(o.children,function(o){return a("el-tag",{key:o.id,staticStyle:{"margin-right":"5px","margin-bottom":"5px"},attrs:{closable:"",type:"info"},on:{close:function(a){e.deleteroleright(t.row,o.id)}}},[e._v("\n                            "+e._s(o.authName)+"\n                            ")])}))],1)}))],1)}),e._v(" "),0===t.row.children.length?a("span",[e._v("该角色还没有分配任何的权限")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),e._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"roleDesc"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",title:"编辑"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete",plain:""}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",plain:"",title:"授权角色"},on:{click:function(a){e.showGrantDialog(t.row)}}})]}}])})],1)],e._v(" "),a("el-dialog",{attrs:{title:"分配权限",visible:e.grantDialogFormVisible},on:{"update:visible":function(t){e.grantDialogFormVisible=t}}},[a("div",{staticClass:"treeBox"},[a("el-tree",{ref:"tree",attrs:{data:e.rightsList,"default-expand-all":!0,"show-checkbox":"","node-key":"id","default-checked-keys":e.rolerdeightlist,props:e.defaultProps}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.grantDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.grantrightsubmit}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.adddialogFormVisible},on:{"update:visible":function(t){e.adddialogFormVisible=t}}},[a("el-form",{attrs:{model:e.addform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.roleName,callback:function(t){e.$set(e.addform,"roleName",t)},expression:"addform.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.roleDesc,callback:function(t){e.$set(e.addform,"roleDesc",t)},expression:"addform.roleDesc"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adddialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addRoleSubmit}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var I=a("VU/8")(R,U,!1,function(e){a("aHLS")},"data-v-2efa001c",null).exports,O={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"goods"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[this._v("首页")]),this._v(" "),t("el-breadcrumb-item",[this._v("商品管理")]),this._v(" "),t("el-breadcrumb-item",[this._v("商品列表")])],1),this._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{height:"600px"}},[t("router-view")],1)],1)},staticRenderFns:[]};var N=a("VU/8")({},O,!1,function(e){a("wd7V")},"data-v-594ea986",null).exports,q={name:"tree-grid",props:{treeStructure:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}},controls:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1}},data:function(){return{}},computed:{data:function(){if(this.treeStructure){var e=this.handleData(this.dataSource,null,null,this.defaultExpandAll);return e}return this.dataSource}},methods:{handleData:function(e,t,a,o){var n=this,s=[];return z()(e).forEach(function(e){void 0===e._expanded&&n.$set(e,"_expanded",o),t&&n.$set(e,"_parent",t);var i=0;if(void 0!==a&&null!==a&&(i=a+1),n.$set(e,"_level",i),s.push(e),e.children&&e.children.length>0){var r=n.handleData(e.children,e,i,o);s=s.concat(r)}}),s},showRow:function(e){var t=e.row,a=(e.rowIndex,!t._parent||t._parent._expanded&&t._parent._show);return t._show=a,a?"":"display:none;"},toggle:function(e){var t=this.data[e];t._expanded=!t._expanded},spaceIconShow:function(e){return!(!this.treeStructure||0!==e)},toggleIconShow:function(e,t){return!!(this.treeStructure&&0===e&&t.children&&t.children.length>0)},getCateInfoById:function(e){this.$emit("editCate",e.cat_id)},deleteCategory:function(e){this.$emit("deleteCate",e.cat_id)}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.data,border:"","row-style":e.showRow}},[e._l(e.columns,function(t,o){return a("el-table-column",{key:t.dataIndex,attrs:{width:t.width,label:t.text},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t,n){return e.spaceIconShow(o)?a("span",{key:n,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.toggleIconShow(o,n.row)?a("el-button",{attrs:{type:"success",plain:"",size:"mini",round:""},on:{click:function(t){e.toggle(n.$index)}}},[n.row._expanded?e._e():a("i",{staticClass:"el-icon-plus",attrs:{"aria-hidden":"true"}}),e._v(" "),n.row._expanded?a("i",{staticClass:"el-icon-minus",attrs:{"aria-hidden":"true"}}):e._e()]):0===o?a("el-button",{attrs:{size:"mini",disabled:"",round:""}},[a("i",{staticClass:"el-icon-minus"})]):0===o?a("span",{staticClass:"ms-tree-space"}):e._e(),e._v("\n      "+e._s(n.row[t.dataIndex])+"\n    ")]}}])})}),e._v(" "),e.controls?a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",title:"修改商品分类",type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){e.getCateInfoById(t.row)}}}),e._v(" "),a("el-button",{attrs:{plain:"",title:"删除商品分类",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){e.deleteCategory(t.row)}}})]}}])}):e._e()],2)},staticRenderFns:[]};var P={components:{TreeGrid:a("VU/8")(q,G,!1,function(e){a("xoAv")},"data-v-704ec3dc",null).exports},data:function(){return{adddialogFormVisible:!1,dataSource:[],total:0,pagenum:1,pagesize:10,addform:{cat_pid:"",cat_name:"",cat_level:""},cascaderProps:{label:"cat_name",children:"children",value:"cat_id"},selectedOptions:[],catelist:[],columns:[{text:"分类名称",dataIndex:"cat_name",width:""},{text:"是否有效",dataIndex:"cat_deleted",width:""},{text:"排序",dataIndex:"cat_level",width:""}]}},methods:{addCateSubmit:function(){var e,t=this;0===this.selectedOptions.length?(this.addform.cat_level=0,this.addform.cat_pid=0):1===this.selectedOptions.length?(this.addform.cat_level=1,this.addform.cat_pid=this.selectedOptions[0]):2===this.selectedOptions.length&&(this.addform.cat_level=2,this.addform.cat_pid=this.selectedOptions[1]),(e=this.addform,m.a.post("categories",e).then(function(e){return e.data})).then(function(e){201===e.meta.status&&(t.$message({type:"success",message:e.meta.msg}),t.adddialogFormVisible=!1,t.initList())})},handleChange:function(e){this.addform.cat_pid=e},showAddDialog:function(){var e=this;this.adddialogFormVisible=!0,g({type:2}).then(function(t){console.log(t),200===t.meta.status&&(e.catelist=t.data)})},deleteCategory:function(e){console.log("delete:"+e)},editCategory:function(e){console.log("edit:"+e)},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.initList()},initList:function(){var e=this;g({type:3,pagenum:this.pagenum,pagesize:this.pagesize}).then(function(t){console.log(t),200===t.meta.status&&(e.dataSource=t.data.result,e.total=t.data.total)})}},mounted:function(){this.initList()}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品分类")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-button",{attrs:{type:"success",plain:""},on:{click:e.showAddDialog}},[e._v("添加分类")])],1),e._v(" "),a("tree-grid",{attrs:{treeStructure:!0,columns:e.columns,"data-source":e.dataSource},on:{deleteCate:e.deleteCategory,editCate:e.editCategory}}),e._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加商品分类",visible:e.adddialogFormVisible},on:{"update:visible":function(t){e.adddialogFormVisible=t}}},[a("el-form",{attrs:{model:e.addform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addform.cat_name,callback:function(t){e.$set(e.addform,"cat_name",t)},expression:"addform.cat_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级名称"}},[a("el-cascader",{attrs:{options:e.catelist,props:e.cascaderProps},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adddialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addCateSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(P,H,!1,function(e){a("fGqF")},"data-v-624c4042",null).exports,M={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"goods"},[this._v("\n    商品分类参数\n")])},staticRenderFns:[]};var j=a("VU/8")({},M,!1,function(e){a("PyOo")},"data-v-c8c59ebc",null).exports,T={data:function(){return{activeName:0,AddForm:{goods_name:"",goods_cat:"1,3,6",goods_price:"",goods_number:"",goods_weight:"",goods_introduce:"",pics:[],attrs:[],content:""},editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}},is_show:!1,uploadImgSrc:"",previewdialogVisible:!1,options:[],catprops:{label:"cat_name",children:"children",value:"cat_id"},uploadHeaders:{Authorization:localStorage.getItem("mytoken")},selectedOptions:[]}},mounted:function(){var e=this;g({type:3}).then(function(t){e.options=t.data})},methods:{handleChange:function(e){this.AddForm.goods_cat=e.join(","),console.log(this.AddForm.goods_cat)},uploadBeforeValid:function(e){if(console.log(e),e.size>5e5)return this.is_show=!0,!1;this.is_show=!1},uploadDone:function(e){this.AddForm.pics.push({pic:e.data.tmp_path})},addGoodsSubmit:function(){var e,t=this;console.log(this.AddForm),(e=this.AddForm,m.a.post("goods",e).then(function(e){return e.data})).then(function(e){console.log(e),201===e.meta.status&&(t.$message({type:"success",message:e.meta.msg}),t.$router.push("/goods/list"))})},getToken:function(){return{Authorization:localStorage.getItem("mytoken")}},handleRemove:function(e,t){if(e.response){var a=e.response.data.tmp_path,o=this.AddForm.pics.findIndex(function(e){return e.pic===a});this.AddForm.pics.splice(o,1)}},handlePreview:function(e){this.previewdialogVisible=!0,this.uploadImgSrc="http://localhost:8888/"+e.response.data.tmp_path},handleClick:function(e,t){},onEditorBlur:function(e){console.log("editor blur!",e)},onEditorFocus:function(e){console.log("editor focus!",e)},onEditorReady:function(e){console.log("editor ready!",e)}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add"},[a("el-steps",{attrs:{active:e.activeName-0,"finish-status":"success"}},[a("el-step",{attrs:{title:"步骤 1"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 3"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 4"}})],1),e._v(" "),[a("el-form",{ref:"AddForm",staticStyle:{height:"600px"},attrs:{model:e.AddForm,"label-width":"80px"}},[a("el-tabs",{staticStyle:{"margin-top":"30px"},attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:e.AddForm.goods_name,callback:function(t){e.$set(e.AddForm,"goods_name",t)},expression:"AddForm.goods_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:e.AddForm.goods_price,callback:function(t){e.$set(e.AddForm,"goods_price",t)},expression:"AddForm.goods_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:e.AddForm.goods_weight,callback:function(t){e.$set(e.AddForm,"goods_weight",t)},expression:"AddForm.goods_weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:e.AddForm.goods_number,callback:function(t){e.$set(e.AddForm,"goods_number",t)},expression:"AddForm.goods_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:e.options,"expand-trigger":"hover",props:e.catprops},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},[e._v("商品参数")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},[a("div",{staticClass:"amap-wrapper"},[a("el-amap",{staticClass:"amap-box",attrs:{vid:"amap-vue"}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8888/api/private/v1/upload",headers:e.getToken(),"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture","on-success":e.uploadDone,"before-upload":e.uploadBeforeValid}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),e.is_show?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")]):e._e()],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{ref:"myQuillEditor",staticStyle:{height:"300px"},attrs:{options:e.editorOption},on:{blur:function(t){e.onEditorBlur(t)},focus:function(t){e.onEditorFocus(t)},ready:function(t){e.onEditorReady(t)}},model:{value:e.AddForm.content,callback:function(t){e.$set(e.AddForm,"content",t)},expression:"AddForm.content"}})],1)],1)],1),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"50px",bottom:"100px"},attrs:{type:"success"},on:{click:e.addGoodsSubmit}},[e._v("提交")])],e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.previewdialogVisible,width:"50%"},on:{"update:visible":function(t){e.previewdialogVisible=t}}},[a("img",{attrs:{src:e.uploadImgSrc,alt:""}})])],2)},staticRenderFns:[]};var J=a("VU/8")(T,W,!1,function(e){a("Uzn9")},"data-v-523913d2",null).exports,X={data:function(){return{keywords:"",goodslist:[],pagenum:1,pagesize:10,total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var e,t=this;(e={query:this.keywords,pagenum:this.pagenum,pagesize:this.pagesize},m.a.get("goods",{params:e}).then(function(e){return e.data})).then(function(e){if(console.log(e),200!==e.meta.status)return t.$message.error("获取商品列表失败！");t.goodslist=e.data.goods,t.total=e.data.total})},handleSizeChange:function(e){this.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.pagenum=e,this.getGoodsList()},removeGoods:function(e){console.log(e)}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-input",{staticClass:"search-input",staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.$router.push({path:"add"})}}},[e._v("添加商品")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodslist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"500"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_price",width:"155",label:"商品价格(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"add_time",width:"140",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.add_time)+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"130",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){e.removeGoods(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var Q=a("VU/8")(X,Y,!1,function(e){a("St0U")},"data-v-54834350",null).exports,K={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("chart",{attrs:{options:this.option}})],1)},staticRenderFns:[]};var Z=a("VU/8")({data:function(){return{option:{title:{text:"堆叠区域图"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"邮件营销",type:"line",stack:"总量",areaStyle:{normal:{}},data:[120,132,101,134,90,230,210]},{name:"联盟广告",type:"line",stack:"总量",areaStyle:{normal:{}},data:[220,182,191,234,290,330,310]},{name:"视频广告",type:"line",stack:"总量",areaStyle:{normal:{}},data:[150,232,201,154,190,330,410]},{name:"直接访问",type:"line",stack:"总量",areaStyle:{normal:{}},data:[320,332,301,334,390,330,320]},{name:"搜索引擎",type:"line",stack:"总量",label:{normal:{show:!0,position:"top"}},areaStyle:{normal:{}},data:[820,932,901,934,1290,1330,1320]}]}}}},K,!1,function(e){a("bHqr")},"data-v-8adffa10",null).exports;o.default.use(i.a);var ee=new i.a({routes:[{path:"/",name:"HelloWorld",component:l,redirect:{name:"Login"}},{path:"/login",name:"Login",component:b},{path:"/",name:"Home",component:w,redirect:{name:"Welcome"},children:[{path:"welcome",name:"Welcome",component:x},{path:"users",name:"User",component:F},{path:"rights",name:"Right",component:A},{path:"roles",name:"Role",component:I},{path:"goods",name:"Goods",component:N,redirect:{name:"List"},children:[{path:"add",name:"Add",component:J},{path:"list",name:"List",component:Q}]},{path:"params",name:"Params",component:j},{path:"categories",name:"Categories",component:B},{path:"reports",name:"Reports",component:Z}]}]}),te=(a("tvR6"),a("yh13"),a("NYxO"));o.default.use(te.a);var ae={setusername:function(e,t){e.username=t,localStorage.setItem("username",t)}},oe={username:function(e){return localStorage.getItem("username")}},ne=new te.a.Store({state:{username:""},getters:oe,actions:{setusernameAction:function(e,t){(0,e.commit)("setusername",t)}},mutations:ae}),se=a("zL8q"),ie=a.n(se),re=a("G0J2"),le=a.n(re),ce=a("/IwO"),de=a.n(ce),ue=(a("3f40"),a("4qOc"),a("+cgv"),a("cs+8")),me=a.n(ue);o.default.use(de.a),o.default.use(ie.a),o.default.config.productionTip=!1,o.default.use(le.a),o.default.component("chart",me.a),de.a.initAMapApiLoader({key:"6a204f2b675f32f8849ec4b6b7c21e5c",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor"],v:"1.4.4"}),ee.beforeEach(function(e,t,a){localStorage.getItem("mytoken")?a():"/login"===e.path?a():a({path:"/login"})}),new o.default({el:"#app",router:ee,store:ne,components:{App:s},template:"<App/>"})},PyOo:function(e,t){},St0U:function(e,t){},Uzn9:function(e,t){},aHLS:function(e,t){},"aa+H":function(e,t){},bHqr:function(e,t){},fGqF:function(e,t){},"lS+k":function(e,t,a){e.exports=a.p+"static/img/avatar.520d72a.jpg"},oR2u:function(e,t){},tvR6:function(e,t){},wd7V:function(e,t){},xoAv:function(e,t){},yh13:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ef52605a238b92faa78f.js.map